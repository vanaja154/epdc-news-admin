<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EPDC</title>
    <link rel="icon" type="image/png" href="images/globe-removebg-preview.png" />

    <script src="https://kit.fontawesome.com/109a493327.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <style>
        .vertical-line {
            border-left: 2px solid #ddd;
            height: 582%;
            position: absolute;
            left: 40%;
            top: 49px;
        }
        .bold-line {
            border: none;
            height: 2px;
            background-color: black;
            margin: 20px 0;
        }
        .row {
            display: flex;
        }
        .btn-primary{
            margin-top: 20px;
            margin-bottom: 20px;
        }
        label{
            font-weight: bold;
        }
        img {
            height: 120px;
            /* width: 40%; */
        }
        
    </style>
</head>
<body>
<div th:replace="~{header :: header}"></div>

<div class="container mt-4 row">
    <!-- Left Side: Input Forms -->
    <div class="col-md-6">
        <h3>Featured News</h3>

        <!-- Single Form for All Updates -->
        <form id="updateForm" method="post" enctype="multipart/form-data">
            <!-- 1st Image -->
            <label class="form-label">1st Image</label>
            <input type="file" class="form-control" name="image1" accept="image/*" />
            <button type="button" onclick="submitForm('image1')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
             <div></div>

            <label class="form-label">1st Image Title</label>
            <textarea class="form-control" name="title1"></textarea>
            <button type="button" onclick="submitForm('title1')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">1st Image Text</label>
            <textarea class="form-control" name="text1"></textarea>
            <button type="button" onclick="submitForm('text1')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <!-- 2nd Image -->
            <label class="form-label">2nd Image</label>
            <input type="file" class="form-control" name="image2" accept="image/*" />
            <button type="button" onclick="submitForm('image2')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">2nd Image Title</label>
            <textarea class="form-control" name="title2"></textarea>
            <button type="button" onclick="submitForm('title2')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">2nd Image Text</label>
            <textarea class="form-control" name="text2"></textarea>
            <button type="button" onclick="submitForm('text2')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <!-- 3rd Image -->
            <label class="form-label">3rd Image</label>
            <input type="file" class="form-control" name="image3" accept="image/*" />
            <button type="button" onclick="submitForm('image3')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">3rd Image Title</label>
            <textarea class="form-control" name="title3"></textarea>
            <button type="button" onclick="submitForm('title3')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">3rd Image Text</label>
            <textarea class="form-control" name="text3"></textarea>
            <button type="button" onclick="submitForm('text3')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <!-- 4th Image -->
            <label class="form-label">4th Image</label>
            <input type="file" class="form-control" name="image4" accept="image/*" />
            <button type="button" onclick="submitForm('image4')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">4th Image Title</label>
            <textarea class="form-control" name="title4"></textarea>
            <button type="button" onclick="submitForm('title4')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">4th Image Text</label>
            <textarea class="form-control" name="text4"></textarea>
            <button type="button" onclick="submitForm('text4')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <!-- 5th Image -->
            <label class="form-label">5th Image</label>
            <input type="file" class="form-control" name="image5" accept="image/*" />
            <button type="button" onclick="submitForm('image5')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">5th Image Title</label>
            <textarea class="form-control" name="title5"></textarea>
            <button type="button" onclick="submitForm('title5')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">5th Image Text</label>
            <textarea class="form-control" name="text5"></textarea>
            <button type="button" onclick="submitForm('text5')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <!-- 6th Image -->
            <label class="form-label">6th Image</label>
            <input type="file" class="form-control" name="image6" accept="image/*" />
            <button type="button" onclick="submitForm('image6')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">6th Image Title</label>
            <textarea class="form-control" name="title6"></textarea>
            <button type="button" onclick="submitForm('title6')" class="btn btn-primary">Update</button>
            <!-- <hr class="bold-line" /> -->
            <div></div>

            <label class="form-label">6th Image Text</label>
            <textarea class="form-control" name="text6"></textarea>
            <button type="button" onclick="submitForm('text6')" class="btn btn-primary">Update </button>
            <!-- <hr class="bold-line" /> -->
        </form>
    </div>

    <!-- Right Side: Display Data -->
    <div class="col-md-6">
        <h3>Featured News</h3>

        <!-- 1st Image -->
        <div>
            <strong>1st Image:</strong>
            <img th:if="${thirdSection.image1}" th:src="@{${'/uploads/' + thirdSection.image1}}" alt="1st Image" width="100" />
            <p th:unless="${thirdSection.image1}">No 1st image available</p>
        </div>
        <div>
            <strong>1st Image Title:</strong>
            <p th:text="${thirdSection.title1} ?: 'No 1st image title available'"></p>
        </div>
        <div>
            <strong>1st Image Text:</strong>
            <p th:text="${thirdSection.text1} ?: 'No 1st image text available'"></p>
        </div>
        <hr />

        <!-- 2nd Image -->
        <div>
            <strong>2nd Image:</strong>
            <img th:if="${thirdSection.image2}" th:src="@{${'/uploads/' + thirdSection.image2}}" alt="2nd Image" width="100" />
            <p th:unless="${thirdSection.image2}">No 2nd image available</p>
        </div>
        <div>
            <strong>2nd Image Title:</strong>
            <p th:text="${thirdSection.title2} ?: 'No 2nd image title available'"></p>
        </div>
        <div>
            <strong>2nd Image Text:</strong>
            <p th:text="${thirdSection.text2} ?: 'No 2nd image text available'"></p>
        </div>
        <hr />

        <!-- 3rd Image -->
        <div>
            <strong>3rd Image:</strong>
            <img th:if="${thirdSection.image3}" th:src="@{${'/uploads/' + thirdSection.image3}}" alt="3rd Image" width="100" />
            <p th:unless="${thirdSection.image3}">No 3rd image available</p>
        </div>
        <div>
            <strong>3rd Image Title:</strong>
            <p th:text="${thirdSection.title3} ?: 'No 3rd image title available'"></p>
        </div>
        <div>
            <strong>3rd Image Text:</strong>
            <p th:text="${thirdSection.text3} ?: 'No 3rd image text available'"></p>
        </div>
        <hr />

        <!-- 4th Image -->
        <div>
            <strong>4th Image:</strong>
            <img th:if="${thirdSection.image4}" th:src="@{${'/uploads/' + thirdSection.image4}}" alt="4th Image" width="100" />
            <p th:unless="${thirdSection.image4}">No 4th image available</p>
        </div>
        <div>
            <strong>4th Image Title:</strong>
            <p th:text="${thirdSection.title4} ?: 'No 4th image title available'"></p>
        </div>
        <div>
            <strong>4th Image Text:</strong>
            <p th:text="${thirdSection.text4} ?: 'No 4th image text available'"></p>
        </div>
        <hr />

        <!-- 5th Image -->
        <div>
            <strong>5th Image:</strong>
            <img th:if="${thirdSection.image5}" th:src="@{${'/uploads/' + thirdSection.image5}}" alt="5th Image" width="100" />
            <p th:unless="${thirdSection.image5}">No 5th image available</p>
        </div>
        <div>
            <strong>5th Image Title:</strong>
            <p th:text="${thirdSection.title5} ?: 'No 5th image title available'"></p>
        </div>
        <div>
            <strong>5th Image Text:</strong>
            <p th:text="${thirdSection.text5} ?: 'No 5th image text available'"></p>
        </div>
        <hr />

        <!-- 6th Image -->
        <div>
            <strong>6th Image:</strong>
            <img th:if="${thirdSection.image6}" th:src="@{${'/uploads/' + thirdSection.image6}}" alt="6th Image" width="100" />
            <p th:unless="${thirdSection.image6}">No 6th image available</p>
        </div>
        <div>
            <strong>6th Image Title:</strong>
            <p th:text="${thirdSection.title6} ?: 'No 6th image title available'"></p>
        </div>
        <div>
            <strong>6th Image Text:</strong>
            <p th:text="${thirdSection.text6} ?: 'No 6th image text available'"></p>
        </div>
        <hr />
    </div>
</div>

<script>
    function submitForm(fieldName) {
        const form = document.getElementById('updateForm');
        const formData = new FormData(form);

        // Check if the field has a value
        const fieldValue = formData.get(fieldName);
        if (!fieldValue || (fieldValue instanceof File && fieldValue.size === 0)) {
            alert('Please select a file or enter text before updating.');
            return; // Stop execution if the field is empty
        }

        // Only include the field being updated
        const data = new FormData();
        data.append(fieldName, fieldValue);

        // Submit the form data to the backend
        fetch('/updateThirdSection', {
            method: 'POST',
            body: data,
        }).then(response => {
            if (response.ok) {
                alert('Updated successfully!');
                location.reload(); // Reload the page to reflect changes
            } else {
                alert('Failed to update.');
            }
        });
    }
</script>
</body>
</html>